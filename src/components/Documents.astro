---
import DocIcon from "@components/DocIcon.astro";

// Get all PDFs in a specific folder
const pdfFiles = import.meta.glob<string>('@assets/docs/*.pdf', {
  // Eagerly import the files so we can use their URLs immediately
  eager: true,
  // query and import properties allow us to get the URL directly
  // instead of the module object with the URL under the `default` property
  // (so 'url' instead of { default: 'url' })
  query: '?url',
  import: 'default'
});

// Transform the object into an array we can map over
const pdfs = Object.entries(pdfFiles).map(([path, url]) => {
  // Get filename "my-file.pdf"
  const filename = path.split('/').pop() || path;
  
  // Remove extension and replace underscores with spaces
  // "my_file.pdf" -> "my file"
  const cleanName = filename.replace(/\.pdf$/i, '').replace(/[_]/g, ' ');

  // Optional: Capitalize first letter
  const formattedName = cleanName.charAt(0).toUpperCase() + cleanName.slice(1);

  return {
    name: formattedName,
    url: url, // The processed URL of the PDF
  };
});
---

<ul>
  {pdfs.map(({ name, url }) => (
    <li>
      <a href={url} target="_blank" rel="noopener noreferrer">
        <DocIcon />
        {name}
      </a>
    </li>
  ))}
</ul>

<style>
  ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }

  li a {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    color: var(--color-dark-grey);
    font-weight: bold;
    font-size: 1.2rem;
  }

  li a:hover {
    color: var(--color-medium-blue);
  }

  svg {
    stroke: var(--color-dark-grey);
    width: 1.5rem;
    height: 1.5rem;
  }
</style>