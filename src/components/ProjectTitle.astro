---
import { Image } from 'astro:assets';
import logo from '@assets/images/LOGO_AI-ASSISTANTS_NO-TEXT.svg';
import type { HTMLAttributes } from 'astro/types';
import { PROJECT_NAME, PROJECT_NAME_FOR_SCREEN_READERS, PROJECT_SUBTITLE } from '@constants';

interface Props {
  includeLogo?: boolean;
  includeSubtitle?: boolean;
  class?: string;
  loading?: HTMLAttributes<'img'>['loading'];
  [key: string]: any;
}

const { t } = Astro.locals;

const { includeLogo = false, includeSubtitle = false, loading, class: className, ...attributes } = Astro.props;

// Split by the hyphen to separate "AI" and "ASSISTANTS 4PID" to show each part in a different color, as per the logo design.
const projectNameSeparator = '-';
const projectNameParts = PROJECT_NAME.split(projectNameSeparator, 2);
---

<div 
  class:list={['container', { 'has-logo': includeLogo }, className]} 
  {...attributes}
>
  {includeLogo && (
    <Image 
      src={logo} 
      alt={t('alt_logo_template', false, PROJECT_NAME)} 
      height="120"
      class="logo"
      style="width: auto;"
      loading={loading}
      aria-hidden="true"
    />
    <span class="sr-only">{t('alt_logo_template', false, PROJECT_NAME_FOR_SCREEN_READERS)}</span>
  )}
  <div class="text">
    <div class="title">
      <span aria-hidden="true"><span class="title-first">{projectNameParts[0]}</span><span class="title-second">{projectNameSeparator}</span><span class="title-third">{projectNameParts[1]}</span></span>
      <span class="sr-only">{PROJECT_NAME_FOR_SCREEN_READERS}</span>
    </div>
    {includeSubtitle && (
      <p class="subtitle" lang="en">
        {PROJECT_SUBTITLE}
      </p>
    )}
  </div>
</div>

<style>
  .container {
    display: inline-flex;
    align-items: center;
  }

  .logo {
    height: var(--logo-height, 120px);
  }

  .text {
    width: auto;
  }

  .title {
    display: inline-block; /* changed from inline to allow margins if needed */
    font-weight: bold;      /* Logos usually look better bold */

    /* IMPORTANT: The font-size from 'style="..."' used in Header for the container
     * inherits naturally, but we must ensure the title uses 'em' units
     * so it scales if the parent font-size changes.
     */
    font-size: 1em;

    /* Reduce the line-height to make the title more compact, which is common in logos */
    line-height: 1.1;
  }

  .title .title-first {
    color: var(--color-logo-light-blue);
  }

  .title .title-second {
    color: var(--color-subtitle, var(--color-logo-dark-grey));
  }

  .title .title-third {
    color: var(--color-logo-medium-blue);
  }

  .subtitle {
    display: block;
    margin: 0;
    font-size: 0.6em;
    font-weight: normal;
    line-height: 1.1;
    /* Here we default to --color-logo-dark-grey and NOT --color-text, since --color-logo-dark-grey is the official grey color of the logo palette, while we use --color-text as a darker grey for general text since it has better contrast with the background. */
    color: var(--color-subtitle, var(--color-logo-dark-grey));

    /* Limit the width of the subtitle so it wraps nicely and it's not a super long line */
    max-width: 30ch;
  }
</style>
