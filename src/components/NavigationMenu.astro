---
import { Icon } from 'astro-icon/components';

import DropdownBase from './DropdownBase.astro';
import { getAriaCurrentPage } from '@utils/a11y';

const { homeLocale: home, t } = Astro.locals;

interface Props {
  class?: string;
  [key: string]: any;
}

const { class: className, ...attributes } = Astro.props;

const menuItems = [
  { href: `${home()}#top`, label: t('nav_home') },
  { href: `${home()}#objectives`, label: t('nav_objectives') },
  { href: `${home()}#partners`, label: t('nav_partners') },
  { href: `${home()}#contact`, label: t('nav_contact') },
  { href: `${home()}#resources`, label: t('nav_resources') },
];
---

<DropdownBase>
  <div class:list={["nav-wrapper dropdown-wrapper", className]} {...attributes}>
    {/* Mobile Trigger (Hamburger) */}
    <button class="hamburger-btn dropdown-trigger" aria-haspopup="true" aria-expanded="false" aria-label={t('nav_menu_button_label')}>
      <Icon name="hamburger" width="32" height="32" aria-hidden="true" />
    </button>

    {/* Menu Items (Row on Desktop, Dropdown on Mobile) */}
    <nav aria-label={t('nav_menu_label')} class="nav-content dropdown-menu">
      <ul class="dropdown-list">
        {menuItems.map(item => (
          <li><a class="dropdown-link" href={item.href} aria-current={getAriaCurrentPage(Astro.url.pathname, item.href)}>{item.label}</a></li>
        ))}
      </ul>
    </nav>
  </div>
</DropdownBase>

<style>
  /* --- Desktop/Tablet Overrides (Disable dropdown behavior) --- */
  @media (min-width: 791px) {
    .hamburger-btn {
        display: none;
    }

    .nav-content.dropdown-menu {
      display: block; /* Always visible */
      position: static;
      background: transparent;
      border: none;
      box-shadow: none;
      padding: 0;
    }

    .dropdown-list {
      flex-direction: row;
      gap: 1.5rem;
    }
  }

  /* --- Mobile Overrides are handled by dropdown-selector.css + Header grid positioning --- */
</style>