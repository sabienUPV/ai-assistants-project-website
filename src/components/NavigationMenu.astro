---
import { Icon } from 'astro-icon/components';

import DropdownBase from './DropdownBase.astro';

const { homeLocale: home, t } = Astro.locals;

interface Props {
  class?: string;
  [key: string]: any;
}

const { class: className, ...attributes } = Astro.props;
---

<DropdownBase>
    <div class:list={["nav-wrapper dropdown-wrapper", className]} {...attributes}>
        {/* Mobile Trigger (Hamburger) */}
        <button class="hamburger-btn dropdown-trigger" aria-haspopup="true" aria-expanded="false" aria-label={t('nav_menu_button_label')}>
            <Icon name="hamburger" width="32" height="32" aria-hidden="true" />
        </button>

        {/* Menu Items (Row on Desktop, Dropdown on Mobile) */}
        <nav aria-label={t('nav_menu_label')} class="nav-content dropdown-menu">
            <ul class="dropdown-list">
                <li><a class="dropdown-link" href={`${home()}#top`}>{t('nav_home')}</a></li>
                <li><a class="dropdown-link" href={`${home()}#${t('nav_objectives').toLowerCase()}`}>{t('nav_objectives')}</a></li>
                <li><a class="dropdown-link" href={`${home()}#${t('nav_partners').toLowerCase()}`}>{t('nav_partners')}</a></li>
                <li><a class="dropdown-link" href={`${home()}#${t('nav_contact').toLowerCase()}`}>{t('nav_contact')}</a></li>
                <li><a class="dropdown-link" href={`${home()}#${t('nav_resources').toLowerCase()}`}>{t('nav_resources')}</a></li>
            </ul>
        </nav>
    </div>
</DropdownBase>

<style>
    /* --- Desktop/Tablet Overrides (Disable dropdown behavior) --- */
    @media (min-width: 791px) {
        .hamburger-btn {
            display: none;
        }

        .nav-content.dropdown-menu {
            display: block; /* Always visible */
            position: static;
            background: transparent;
            border: none;
            box-shadow: none;
            padding: 0;
        }

        .dropdown-list {
            flex-direction: row;
            gap: 1.5rem;
        }
    }

    /* --- Mobile Overrides are handled by dropdown-selector.css + Header grid positioning --- */
</style>